# Reglas de Proyecto - Brisca Multiplatform

## üö´ PROHIBICI√ìN ABSOLUTA: Comentarios Redundantes

### REGLA CR√çTICA #4: NUNCA usar comentarios que explican c√≥digo obvio

**EST√Å ESTRICTAMENTE PROHIBIDO:**
- ‚ùå `// Ahora validamos el usuario`
- ‚ùå `// Llamamos a la API`
- ‚ùå `// Obtenemos los datos`
- ‚ùå `// Creamos el componente`
- ‚ùå `// Inicializamos el estado`
- ‚ùå `// Configuramos el cliente HTTP`
- ‚ùå `// Verificamos si est√° vac√≠o`
- ‚ùå `// Retornamos el resultado`
- ‚ùå Cualquier comentario que describa lo que el c√≥digo hace de forma obvia

### ‚úÖ OBLIGATORIO: Solo Javadoc/KDoc cuando sea necesario

**SIEMPRE usar Javadoc/KDoc para documentar:**
- Funciones p√∫blicas
- Clases p√∫blicas
- Propiedades p√∫blicas complejas
- L√≥gica de negocio no obvia
- Decisiones de dise√±o importantes
- Par√°metros y valores de retorno

**NO usar comentarios para:**
- Explicar c√≥digo obvio
- Describir lo que hace una l√≠nea de c√≥digo
- Comentar c√≥digo que se puede entender leyendo el nombre de la funci√≥n/clase

### üìù Formato de Javadoc/KDoc

**Para funciones:**
```kotlin
/**
 * Valida las credenciales del usuario y genera un token de autenticaci√≥n.
 *
 * @param username Nombre de usuario
 * @param password Contrase√±a del usuario
 * @return Token de autenticaci√≥n si las credenciales son v√°lidas, null en caso contrario
 * @throws NetworkException Si hay un error de conexi√≥n
 */
fun authenticate(username: String, password: String): String?
```

**Para clases:**
```kotlin
/**
 * Componente que maneja la l√≥gica de actualizaci√≥n opcional de la aplicaci√≥n.
 *
 * Este componente coordina la obtenci√≥n de informaci√≥n de actualizaci√≥n,
 * la presentaci√≥n al usuario y la navegaci√≥n a la tienda de aplicaciones.
 *
 * @property state Estado actual del componente (Ready, Loading, Error)
 */
class OptionalUpdateComponent(...)
```

**Para propiedades complejas:**
```kotlin
/**
 * URL base de la API configurada seg√∫n el ambiente actual.
 * Se actualiza din√°micamente cuando el usuario cambia de ambiente.
 */
val apiBaseUrl: String
```

### üîç Detecci√≥n de Violaciones

**ANTES de escribir un comentario, preguntar:**
1. ¬øEl comentario solo repite lo que dice el c√≥digo? ‚Üí ELIMINAR
2. ¬øEl c√≥digo es obvio por su nombre? ‚Üí ELIMINAR comentario
3. ¬øEl comentario explica POR QU√â, no QU√â? ‚Üí MANTENER si es relevante
4. ¬øEl comentario documenta una decisi√≥n de dise√±o? ‚Üí MANTENER como Javadoc/KDoc

### ‚ö†Ô∏è Excepciones (MUY LIMITADAS)

**√öNICAMENTE se permiten comentarios inline cuando:**
- **Explican POR QU√â, no QU√â:**
  ```kotlin
  // Usar 0.7f en lugar de 0.5f para ser m√°s tolerante con el pull-to-refresh
  const val PULL_TO_REFRESH_DRAG_MULTIPLIER = 0.7f
  ```

- **Documentan workarounds o bugs conocidos:**
  ```kotlin
  // Workaround: iOS requiere este delay para evitar race condition
  delay(100)
  ```

- **Explican l√≥gica compleja no obvia:**
  ```kotlin
  // Si el HTML contiene tags, renderizarlo completo; si no, dividir por l√≠neas
  val mejoras = if (htmlContent.contains("<")) {
      listOf(htmlContent)
  } else {
      htmlContent.split("\n").filter { it.isNotBlank() }
  }
  ```

**NUNCA para:**
- Describir c√≥digo obvio
- Explicar lo que hace una funci√≥n (eso va en Javadoc/KDoc)
- Comentar cada l√≠nea de c√≥digo
- Traducir c√≥digo a espa√±ol en comentarios

### üìù Checklist Antes de Escribir Comentarios

Antes de escribir cualquier comentario, verificar:

- [ ] ¬øEl comentario solo repite el c√≥digo? ‚Üí ELIMINAR
- [ ] ¬øEl c√≥digo es obvio por su nombre? ‚Üí ELIMINAR comentario
- [ ] ¬øNecesito documentar la funci√≥n/clase? ‚Üí Usar Javadoc/KDoc
- [ ] ¬øExplico POR QU√â, no QU√â? ‚Üí MANTENER si es relevante
- [ ] ¬øEs un comentario inline innecesario? ‚Üí ELIMINAR

### üéØ Ejemplo Correcto vs Incorrecto

**‚ùå INCORRECTO:**
```kotlin
class LoginComponent {
    // Inicializamos el estado
    private val state = MutableValue(LoginState.Loading)
    
    // Llamamos a la API para autenticar
    fun login(username: String, password: String) {
        // Validamos que el username no est√© vac√≠o
        if (username.isBlank()) {
            // Retornamos error
            return
        }
        
        // Obtenemos el repositorio
        val repository = get<AuthRepository>()
        
        // Llamamos al m√©todo de login
        repository.login(username, password)
    }
    
    // Creamos el componente
    init {
        // Cargamos el estado inicial
        loadInitialState()
    }
}
```

**‚úÖ CORRECTO:**
```kotlin
/**
 * Componente que maneja la autenticaci√≥n de usuarios.
 *
 * Coordina la validaci√≥n de credenciales, la comunicaci√≥n con el backend
 * y la gesti√≥n del estado de autenticaci√≥n.
 */
class LoginComponent {
    private val state = MutableValue(LoginState.Loading)
    
    /**
     * Autentica un usuario con las credenciales proporcionadas.
     *
     * @param username Nombre de usuario
     * @param password Contrase√±a del usuario
     * @throws ValidationException Si las credenciales son inv√°lidas
     */
    fun login(username: String, password: String) {
        if (username.isBlank()) {
            return
        }
        
        val repository = get<AuthRepository>()
        repository.login(username, password)
    }
    
    init {
        loadInitialState()
    }
}
```

### üîß Cuando Encuentres Comentarios Redundantes

**SI encuentras comentarios redundantes en c√≥digo existente:**

1. **Identificar el comentario:** ¬øExplica c√≥digo obvio?
2. **Evaluar:** ¬øEl c√≥digo se entiende sin el comentario?
3. **Si es obvio:** Eliminar el comentario
4. **Si necesita documentaci√≥n:** Convertir a Javadoc/KDoc apropiado
5. **Si explica POR QU√â:** Mantener solo si es relevante

### üìö Buenas Pr√°cticas

**C√≥digo auto-documentado:**
```kotlin
// ‚ùå MAL
// Validamos que el usuario no est√© vac√≠o
if (user.isEmpty()) return

// ‚úÖ BIEN
if (user.isEmpty()) return
```

**Nombres descriptivos:**
```kotlin
// ‚ùå MAL
// Obtiene el usuario actual
fun getUser(): User?

// ‚úÖ BIEN
fun getCurrentUser(): User?
```

**Javadoc/KDoc para funciones p√∫blicas:**
```kotlin
// ‚ùå MAL
// Funci√≥n que valida el token
fun validateToken(token: String): Boolean

// ‚úÖ BIEN
/**
 * Valida si un token de autenticaci√≥n es v√°lido y no ha expirado.
 *
 * @param token Token a validar
 * @return true si el token es v√°lido, false en caso contrario
 */
fun validateToken(token: String): Boolean
```

### üìö Referencias

- Clean Code: "Comments are a necessary evil"
- Kotlin Style Guide: https://kotlinlang.org/docs/coding-conventions.html
- Best Practice: El c√≥digo debe ser auto-documentado

---

## ‚ö†Ô∏è RECORDATORIO CR√çTICO

**CADA VEZ que escribas un comentario:**
1. ¬øEl comentario solo repite el c√≥digo? ‚Üí ELIMINAR
2. ¬øEl c√≥digo es obvio? ‚Üí ELIMINAR comentario
3. ¬øNecesito documentar? ‚Üí Usar Javadoc/KDoc
4. ¬øExplico POR QU√â, no QU√â? ‚Üí MANTENER solo si es relevante

**NO HAY EXCUSAS. EL C√ìDIGO DEBE SER AUTO-DOCUMENTADO.**

**Los comentarios redundantes hacen el c√≥digo m√°s dif√≠cil de mantener y actualizar.**
